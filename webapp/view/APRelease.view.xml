<mvc:View
    controllerName="nxt.ap.release.controller.APRelease"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    displayBlock="true">

    <f:DynamicPage id="apReleasePage">
        <f:title>
            <f:DynamicPageTitle>
                <!-- App Header with Logo and Titles -->
                <f:heading>
                    <!-- Fiori-compliant header: logo left, titles right, vertical center -->
<HBox alignItems="Center" justifyContent="Start" class="sapUiSmallMarginBottom">
    <Image src="resources/img/nxt4sap.png" alt="Company Logo" width="60px" height="40px"/>
    <VBox class="sapUiSmallMarginBegin">
        <Title text="{i18n>apReleaseTitle}" level="H1"/>
        <Text text="{i18n>appSubtitle}" class="sapUiTinyMarginTop"/>
    </VBox>
</HBox>
                </f:heading>
                <f:actions>
                    <Button text="{i18n>releaseForPosting}" type="Emphasized" press="onReleaseForPosting" icon="sap-icon://accept"/>
                    <Button text="{i18n>rejectWithComment}" press="onRejectWithComment" icon="sap-icon://decline"/>
                    <Button text="{i18n>forwardWithInquiry}" press="onForwardWithInquiry" icon="sap-icon://forward"/>
                    <Button text="{i18n>documents}" press="onDocuments" icon="sap-icon://document"/>
                    <Button text="{i18n>processLog}" press="onProcessLog" icon="sap-icon://process"/>
                    <Button text="{i18n>nxtAi}" press="onNxtAi" icon="sap-icon://lightbulb"/>
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <VBox>
                <!-- Header Info -->
                <HBox justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                    <VBox id="headerVBox">
                        <HBox><Text text="{i18n>costCenter}"/><Text text="{/ProcessInfo/0/costCenterDescription}"/></HBox>
                        <HBox><Text text="{i18n>requester}"/><Text text="{/ProcessInfo/0/requester}"/></HBox>
                        <HBox><Text text="{i18n>approvedBy}"/><Text text="{/ProcessInfo/0/approvedBy}"/></HBox>
                    </VBox>
                    <VBox>
                        <HBox><Text text="{i18n>natureOfInvoice}"/><Text text="{/ProcessInfo/0/natureOfInvoice}"/></HBox>
                        <HBox><Text text="{i18n>totalAmount}"/><Text text="{/ProcessInfo/0/totalAmount}"/></HBox>
                        <HBox><Text text="{i18n>invoiceDate}"/><Text text="{/ProcessInfo/0/invoiceDate}"/></HBox>
                    </VBox>
                    <VBox>
                        <HBox><Text text="{i18n>dueDate}"/><Text text="{/ProcessInfo/0/dueDate}"/></HBox>
                        <HBox><Text text="{i18n>discount}"/><Text text="{/ProcessInfo/0/discountPercentage}"/></HBox>
                        <HBox><Text text="{i18n>apTime}"/><Text text="{/ProcessInfo/0/apTimeDays}"/></HBox>
                    </VBox>
                    <VBox>
                        <HBox><Text text="{i18n>releaseStep}"/><Text text="{/ProcessInfo/0/releaseStep}"/></HBox>
                        <HBox><Text text="{i18n>firstReleaser}"/><Text text="{/ProcessInfo/0/firstReleaser}"/></HBox>
                        <HBox><Text text="{i18n>secondReleaser}"/><Text text="{/ProcessInfo/0/secondReleaser}"/></HBox>
                    </VBox>
                </HBox>

                <!-- Invoices Table -->
                <Table
                    id="invoicesTable"
                    items="{Invoices}"
                    growing="true"
                    growingScrollToLoad="true"
                    width="100%">
                    <headerToolbar>
                        <OverflowToolbar>
    <Title text="{i18n>invoices}" level="H2"/>
    <ToolbarSpacer/>
    <SearchField width="15rem" search="onInvoiceSearch" placeholder="{i18n>search}"/>
    <Button icon="sap-icon://refresh" tooltip="{i18n>refresh}" press="onRefreshInvoices"/>
    <Button icon="sap-icon://sort" tooltip="{i18n>sort}" press="onSortInvoices"/>
    <Button icon="sap-icon://excel-attachment" tooltip="Export"/>
    <Button icon="sap-icon://filter" tooltip="Filter"/>
    <Button icon="sap-icon://action-settings" tooltip="Personalize Columns"/>
</OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="4em">
                            <Text text="{i18n>status}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>companyCode}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>sapDocument}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>vendorId}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>vendorName}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>reference}"/>
                        </Column>
                        <Column hAlign="End">
                            <Text text="{i18n>totalAmount}"/>
                        </Column>
                        <Column hAlign="End">
                            <Text text="{i18n>taxAmount}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>currency}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>invoiceDate}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>dueDate}"/>
                        </Column>
                        <Column hAlign="End">
                            <Text text="{i18n>discountAmount}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>pdfDocument}"/>
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <ObjectStatus text="{Status}"/>
                                <Text text="{CompanyCode}"/>
                                <Text text="{SAPDocument}"/>
                                <Text text="{VendorID}"/>
                                <Text text="{VendorName}"/>
                                <Text text="{Reference}"/>
                                <Text text="{TotalAmount}"/>
                                <Text text="{TaxAmount}"/>
                                <Text text="{Currency}"/>
                                <Text text="{InvoiceDate}"/>
                                <Text text="{DueDate}"/>
                                <Text text="{DiscountAmount}"/>
                                <Button icon="sap-icon://attachment" press="onOpenPdf" tooltip="{i18n>openPdf}"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

                <!-- Line Items Table -->
                <Table
                    id="lineItemsTable"
                    items="{LineItems}"
                    growing="true"
                    growingScrollToLoad="true"
                    width="100%">
                    <headerToolbar>
                        <OverflowToolbar>
    <Title text="{i18n>lineItems}" level="H2"/>
    <ToolbarSpacer/>
    <SearchField width="15rem" search="onLineItemSearch" placeholder="{i18n>search}"/>
    <Button icon="sap-icon://refresh" tooltip="{i18n>refresh}" press="onRefreshLineItems"/>
    <Button icon="sap-icon://sort" tooltip="{i18n>sort}" press="onSortLineItems"/>
    <Button icon="sap-icon://excel-attachment" tooltip="Export"/>
    <Button icon="sap-icon://filter" tooltip="Filter"/>
    <Button icon="sap-icon://action-settings" tooltip="Personalize Columns"/>
</OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column>
                            <Text text="{i18n>lineType}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>purchaseOrder}"/>
                        </Column>
                        <Column hAlign="End">
                            <Text text="{i18n>netAmount}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>taxCode}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>description}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>glAccount}"/>
                        </Column>
                        <Column>
                            <Text text="{i18n>costCenter}"/>
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{LineType}"/>
                                <Text text="{PurchaseOrder}"/>
                                <Text text="{NetAmount}"/>
                                <Text text="{TaxCode}"/>
                                <Text text="{Description}"/>
                                <Text text="{GLAccount}"/>
                                <Text text="{CostCenter}"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
