/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Utils","sap/ui/dom/includeScript","sap/base/util/restricted/_pick"],function(e,t,i,s){"use strict";var a={DATA:"/flex/data/",MODULES:"/flex/modules/"};return{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules(e){return new Promise(function(t,s){i(e,undefined,t,s)})},_addClientInfo(e){var i=t.getUrlParameter("sap-client");if(!e&&i){e={}}if(i){e["sap-client"]=i}},loadFlexData(t){if(t.cacheKey==="<NO CHANGES>"){return Promise.resolve()}var i=s(t,["version","allContexts","adaptationId"]);this._addClientInfo(i);e.addSAPLogonLanguageInfo(i);var n;if(t.appDescriptor&&t.appDescriptor["sap.app"]){n=t.appDescriptor["sap.app"].id}if(t.preview){t.reference=t.preview.reference;i.upToLayerType=t.preview.maxLayer}var r=e.getUrl(a.DATA,t,i);return e.sendRequest(r,"GET",{initialConnector:this,xsrfToken:this.xsrfToken,siteId:t.siteId,cacheable:true,sAppDescriptorId:n}).then(function(s){var n=s.response;if(s.etag){n.cacheKey=s.etag}else if(t.cacheKey){n.cacheKey=t.cacheKey}n.changes=n.changes.concat(n.compVariants||[]);if(n.settings){this.settings=n.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable;this.settings.isContextSharingEnabled=true;this.settings.isLocalResetEnabled=true}if(!n.loadModules){return n}var r=e.getUrl(a.MODULES,t,i);return this._loadModules(r).then(function(){return n})}.bind(this))}}});
//# sourceMappingURL=LrepConnector.js.map