{"version":3,"file":"FlexController.js","names":["sap","ui","define","Utils","Layer","ChangePersistenceFactory","Versions","Applier","Reverter","URLHandler","States","ControlVariantApplyAPI","JsControlTreeModifier","Element","Log","revertChangesAndUpdateVariantModel","oComponent","bSkipUrlUpdate","aChanges","Promise","resolve","then","length","reverse","revertMultipleChanges","appComponent","modifier","flexController","this","undefined","bind","oModel","getModel","getVariantModelName","update","parameters","updateURL","updateHashEntry","model","FlexController","sComponentName","_oChangePersistence","_sComponentName","getChangePersistenceForComponent","prototype","setVariantSwitchPromise","oPromise","_oVariantSwitchPromise","waitForVariantSwitch","checkDependencies","oChange","mDependencies","mChanges","oAppComponent","aRelevantChanges","bResult","canChangePotentiallyBeApplied","push","sDependencyKey","getId","aDependentChanges","dependencies","i","n","oDependentChange","getChangeFromChangesMap","aSelectors","getDependentControlSelectorList","getSelector","some","oSelector","bySelector","waitForChangesToBeApplied","bSkipWaitForVariantSwitch","aPromises","map","mSelector","_waitForChangesToBeApplied","all","mPropertyBag","filterChanges","isCurrentProcessFinished","changeTypes","includes","getChangeType","oControl","selector","id","getElementById","mChangesMap","getChangesMapForComponent","Object","assign","aChangesForControl","aNotYetProcessedChanges","filter","getAppComponentForControl","forEach","indexOf","concat","addChangeProcessingPromises","_removeOtherLayerChanges","sLayer","bRemoveOtherLayerChanges","aLayersToReset","values","sLayerToCheck","removeDirtyChanges","saveAll","bSkipUpdateCache","bDraft","bCondenseAnyLayer","sParentVersion","aDraftFilenames","oVersionModel","getVersionsModel","reference","layer","CUSTOMER","getProperty","saveDirtyChanges","oResult","response","vChangeDefinition","Array","isArray","change","fileName","onAllChangesSaved","draftFilenames","resetChanges","sGenerator","aSelectorIds","aChangeTypes","vLayer","applyVariantChanges","reduce","oPreviousPromise","_addRunTimeCreatedChangeAndUpdateDependencies","applyChangeOnControl","error","FakePromise","saveSequenceOfDirtyChanges","aDirtyChanges","oResponse","oDirtyChange","setState","LifecycleState","PERSISTED"],"sources":["FlexController-dbg.js"],"mappings":"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","ignoreList":[]}