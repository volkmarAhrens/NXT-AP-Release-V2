{"version":3,"file":"Versions.js","names":["sap","ui","define","ChangePersistenceFactory","Utils","Version","Settings","Storage","JSONModel","BindingMode","_mInstances","MODEL_SIZE_LIMIT","BACKEND_REQUEST_LIMIT","createModel","bVersioningEnabled","aVersions","_prepareVersionsModel","then","oModel","setDefaultBindingMode","OneWay","setSizeLimit","setDirtyChanges","bDirtyChanges","setProperty","updateDraftVersion","updateBindings","getProperty","bBackendDraft","bDraftAvailable","Number","Draft","_doesDraftExistInVersions","splice","version","type","Type","filenames","isPublished","shift","bActivateEnabled","_isPublishVersionEnabled","sDisplayedVersion","Original","some","oVersion","oVersionsModel","sPersistedBasisForDisplayedVersion","sActiveVersion","aDraftFilenames","length","forEach","Active","Inactive","getUShellService","oURLParsingService","sUrlVersionParameter","getParameter","UrlParameter","publishVersionEnabled","versioningEnabled","versions","backendDraft","dirtyChanges","draftAvailable","activateEnabled","activeVersion","persistedVersion","displayedVersion","draftFilenames","_removeDirtyChanges","mPropertyBag","oDirtyChangeInfo","aDirtyChanges","aChangePersistences","changePersistences","oChangePersistence","getDirtyChanges","concat","deleteChanges","_getDirtyChangesInfo","oDirtyChangesInfo","dirtyChangesExist","reference","oChangePersistenceForAppDescriptorChanges","getChangePersistenceForComponent","push","nonNormalizedReference","_updateVersionModelWhenDiscardOrActivate","iNewVersion","Versions","initialize","sReference","sLayer","layer","limit","getInstance","oSettings","bVersionsEnabled","isVersioningEnabled","aVersionsPromise","load","Promise","resolve","getVersionsModel","hasVersionsModel","Error","clearInstances","updateModelFromBackend","undefined","onAllChangesSaved","contextBasedAdaptation","activate","bDraftExists","reject","bDirtyChangesExists","oVersionEntry","discardDraft","bBackendDraftExists","oDiscardPromise","bDirtyChangesRemoved","backendChangesDiscarded","dirtyChangesDiscarded","publish","sMessage","bIsPublishedOrOlderVersion"],"sources":["Versions-dbg.js"],"mappings":"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","ignoreList":[]}