/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core"],function(e){"use strict";var i={};var t="appearance",a="light",o="dark",n="hcb",h="hcw",s="auto",r=Object.create(null);r[a]="sap_horizon";r[o]="sap_horizon_dark";r[n]="sap_horizon_hcb";r[h]="sap_horizon_hcw";r[s]="sap_horizon";i.init=function(t){this.oComponent=t;this._oConfigUtil=t.getOwnerComponent().getConfigUtil();this._oCookieNames=this._oConfigUtil.COOKIE_NAMES;this.bus=e.getEventBus();this._createConfigurationBasedOnURIInput();this._bSupportsPrefersColorScheme=!!(window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches||window.matchMedia("(prefers-color-scheme: light)").matches));if(this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_REQUIRED_COOKIES)==="1"&&this._aConfiguration.length>0){i._applyCookiesConfiguration(this._aConfiguration)}else{i._applyDefaultConfiguration(this._aConfiguration)}};i._getTheme=function(){return r};i._updateAppearance=function(i){var n=this._bSupportsPrefersColorScheme&&i===s,h=window.matchMedia("(prefers-color-scheme: dark)").matches;if(n){this._toggleLightOrDarkAppearance(h);this._attachPrefersColorSchemeChangeListener()}else{e.applyTheme(this._getTheme()[i])}this._sLastKnownAppearanceKey=i;if(n){this.bus.publish("themeChanged","onThemeChanged",{sThemeActive:r[h?o:a]})}else{this.bus.publish("themeChanged","onThemeChanged",{sThemeActive:this._getTheme()[i]})}if(this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_REQUIRED_COOKIES)==="1"){this._oConfigUtil.setCookie(t,i)}};i._toggleLightOrDarkAppearance=function(i){if(i){e.applyTheme(this._getTheme().dark)}else{e.applyTheme(this._getTheme().light)}};i._attachPrefersColorSchemeChangeListener=function(){var e=this,i,t;if(!this._bAttachedPrefersColorSchemeChangeListener){i=window.matchMedia("(prefers-color-scheme: dark)");t=function(i){if(e._sLastKnownAppearanceKey===s){this._toggleLightOrDarkAppearance(i.matches);e.bus.publish("themeChanged","onThemeChanged",{sThemeActive:r[i.matches?o:a]})}};if(i.addEventListener){i.addEventListener("change",t)}else{i.addListener(t)}this._bAttachedPrefersColorSchemeChangeListener=true}};i._applyCookiesConfiguration=function(){var e,i,a;for(a=0;a<this._aConfiguration.length;a++){i=this._aConfiguration[a];e=this._oConfigUtil.getCookieValue(i);if(e!==""){if(i===t){this._updateAppearance(e,this.oComponent)}this._aConfiguration.splice(a,1);a--}}if(this._aConfiguration.length>0){this._applyDefaultConfiguration()}};i._applyDefaultConfiguration=function(){this._aConfiguration.forEach(function(e){if(e===t){this._updateAppearance(s)}},this)};i._createConfigurationBasedOnURIInput=function(){var e=new URLSearchParams(window.location.search);this._aConfiguration=[];if(!(e.has("sap-ui-theme")||e.has("sap-theme"))){this._aConfiguration.push(t)}};return i});
//# sourceMappingURL=ThemePicker.js.map