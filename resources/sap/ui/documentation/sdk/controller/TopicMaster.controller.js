/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/documentation/sdk/controller/MasterTreeBaseController","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ui/documentation/sdk/controller/util/Highlighter","sap/ui/documentation/sdk/controller/util/DocuInfo"],function(t,e,i,o,s,n,r){"use strict";var h=o.SplitAppMode;return e.extend("sap.ui.documentation.sdk.controller.TopicMaster",{onInit:function(){this._oTree=this.byId("tree");var t=new i;t.setSizeLimit(1e4);this.getView().setModel(t);this.getRouter().getRoute("topic").attachPatternMatched(this._onMatched,this);this.getRouter().getRoute("topicId").attachPatternMatched(this._onTopicMatched,this);this.getRouter().getRoute("subTopicId").attachPatternMatched(this._onTopicMatched,this);this._oIndexPromise=this._getDocuIndexPromise().then(function(e){e=this._addSearchMetadata(e,"");t.setData(e);this._initTreeUtil("key","links")}.bind(this)).catch(function(){this.onRouteNotFound()}.bind(this))},_onTopicMatched:function(t){try{this.showMasterSide()}catch(t){s.error(t)}this._topicId=t.getParameter("arguments").id.split("/")[0];this._oIndexPromise.then(function(){this._expandTreeToNode(this._preProcessTopicID(this._topicId),this.getModel())}.bind(this))},onAfterRendering:function(){if(!this.highlighter){this.highlighter=new n(this._oTree.getDomRef(),{shouldBeObserved:true})}},onExit:function(){this.highlighter.destroy()},onTreeFilter:function(){e.prototype.onTreeFilter.apply(this,arguments);if(this.highlighter){this.highlighter.highlight(this._sFilter)}return this},_onMatched:function(){this.getView().getParent().getParent().setMode(h.ShowHideMode);this._collapseAllNodes();this._clearSelection();if(t.system.desktop){setTimeout(function(){this.getView().byId("searchField").getFocusDomRef().focus()}.bind(this),0)}},_getDocuIndexPromise:function(){return r.getDocuIndexPromise(this.getConfig())},_addSearchMetadata:function(t,e){for(var i=0;i<t.length;i++){t[i].name=e?e+" "+t[i].text:t[i].text;if(t[i].links){t[i].links=this._addSearchMetadata(t[i].links,t[i].name)}}return t},onNodeSelect:function(t){this.getRouter().navTo("topicId",{id:t.getParameter("listItem").getTarget()},false)},_preProcessTopicID:function(t){if(!t||typeof t!=="string"){return t}return t.replace(/\.html[#]?[0-9a-z_]*$/,"")}})});
//# sourceMappingURL=TopicMaster.controller.js.map