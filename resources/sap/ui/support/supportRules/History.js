/**
* OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/ui/support/library","sap/ui/support/supportRules/IssueManager","sap/ui/support/supportRules/RuleSetLoader","sap/ui/support/supportRules/report/StringHistoryFormatter","sap/ui/support/supportRules/report/AbapHistoryFormatter","sap/ui/core/date/UI5Date"],function(e,t,s,r,a,o){"use strict";var i=[];var u=function(e,t){var s=null;if(e.rulePreset){s={id:e.rulePreset.id,title:e.rulePreset.title,description:e.rulePreset.description,dateExported:e.rulePreset.dateExported}}return{loadedLibraries:{},analysisInfo:{duration:e.analysisDuration,date:e.date,executionScope:e.scope.executionScope,rulePreset:s},analysisMetadata:e.analysisMetadata,applicationInfo:e.application,technicalInfo:e.technical,totalIssuesCount:0,issues:e.onlyIssues}};var n=function(e,t,s){e.loadedLibraries[t]={};var r=e.loadedLibraries[t];r["rules"]={};r["issueCount"]=s.rules[t].issueCount;r["allRulesSelected"]=true;e.totalIssuesCount+=s.rules[t].issueCount};var l=function(e,t,s,r){var a=r.rules[t][s];e.loadedLibraries[t]["rules"][s]={id:s,library:t,name:a.title,selected:a.selected,issuesCount:a.issueCount,issues:c(r,t,s),resolution:a.resolution,minVersion:a.minversion,categories:a.categories,audiences:a.audiences,description:a.description};if(a.selected===false){e.loadedLibraries[t]["allRulesSelected"]=false}};var c=function(e,t,s){var r=[];if(e.issues[t]&&e.issues[t][s]){e.issues[t][s].forEach(function(e){var t={context:e.context,details:e.details,name:e.name,severity:e.severity};r.push(t)})}return r};var p={getRuns:function(){return i.slice()},saveAnalysis:function(e){return e._oDataCollector.getTechInfoJSON().then(function(r){var a=t.groupIssues(t.getIssuesModel()),u=t.getIssues(),n=s.getRuleSets(),l=e._oSelectedRulesIds,c=e._oSelectedRulePreset;i.push({date:o.getInstance().toUTCString(),issues:a,onlyIssues:u,application:e._oDataCollector.getAppInfo(),technical:r,rules:t.getRulesViewModel(n,l,a),rulePreset:c,scope:{executionScope:{type:e._oExecutionScope.getType(),selectors:e._oExecutionScope._getContext().parentId||e._oExecutionScope._getContext().components}},analysisDuration:e._oAnalyzer.getElapsedTimeString(),analysisMetadata:e._oAnalysisMetadata||null})})},clearHistory:function(){i=[]},getHistory:function(){var e=[];i.forEach(function(t){var s=u(t);for(var r in t.rules){n(s,r,t);for(var a in t.rules[r]){l(s,r,a,t)}}e.push(s)});return e},getFormattedHistory:function(t){var s,o=this.getHistory();switch(t){case e.HistoryFormats.Abap:s=a.format(o);break;default:s=r.format(o)}return s}};return p},true);
//# sourceMappingURL=History.js.map