/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/UIArea","sap/ui/dt/DOMUtil","sap/ui/dt/ElementUtil","sap/ui/dt/OverlayRegistry"],function(e,r,n,t){"use strict";var i={};i.isInTargetZoneAggregation=function(e){var r=e.getParent();return!!r&&r.isTargetZone()};i.getParentInformation=function(e){var r=e.getParentElementOverlay();if(r){var t=r.getElement();var i=e.getParentAggregationOverlay().getAggregationName();var a=n.getAggregation(t,i);var g=e.getElement();var l=a.indexOf(g);return{parent:t,aggregation:i,index:l}}return{parent:null,aggregation:"",index:-1}};i.getClosestOverlayFor=function(e){if(!e){return null}var r=e;var n=t.getOverlay(r);while(r&&!n){r=r.getParent();n=t.getOverlay(r)}return n};i.getGeometry=function(e){var r;var n;var t;var i;e.forEach(function(e){if(e&&e.visible){if(!r||e.position.left<r){r=e.position.left}if(!t||e.position.top<t){t=e.position.top}var a=e.position.left+e.size.width;if(!n||a>n){n=a}var g=e.position.top+e.size.height;if(!i||g>i){i=g}}});if(typeof r==="number"){return{size:{width:n-r,height:i-t},position:{left:r,top:t},visible:true}}};i.getFirstDescendantByCondition=function(e,r){if(!r){throw new Error("expected condition is 'undefined' or not a function")}var n=i.getAllChildOverlays(e);for(var t=0,a=n.length;t<a;t++){var g=n[t];if(r(g)){return g}var l=this.getFirstDescendantByCondition(g,r);if(l){return l}}return undefined};i.getLastDescendantByCondition=function(e,r){if(!r){throw new Error("expected condition is 'undefined' or not a function")}var n=i.getAllChildOverlays(e);for(var t=n.length-1,a=-1;t>a;t--){var g=n[t];if(r(g)){return g}var l=this.getLastDescendantByCondition(g,r);if(l){return l}}return undefined};i.getAllChildOverlays=function(e){var r=[];var n=[];if(!e){return r}var t=e.getChildren();for(var i=0;i<t.length;i++){n=t[i].getChildren();if(n&&n.length>0){r=r.concat(n)}}return r};i.getFirstChildOverlay=function(e){var r=this.getAllChildOverlays(e);if(r.length){return r[0]}return undefined};i.getLastChildOverlay=function(e){var r=this.getAllChildOverlays(e);if(r.length){return r[r.length-1]}return undefined};i.getNextSiblingOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(r){var n=r.getChildren();var t=n.indexOf(e);if(t!==n.length-1){return n[t+1]}else if(t===n.length-1){var i=e.getParentElementOverlay();n=i.getChildren();for(t=n.indexOf(r)+1;t<n.length;t++){var a=n[t].getChildren();if(a.length){return a[0]}}}}};i.getPreviousSiblingOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(r){var n=r.getChildren();var t=n.indexOf(e);if(t>0){return n[t-1]}else if(t===0){var i=e.getParentElementOverlay();n=i.getChildren();for(t=n.indexOf(r)-1;t>=0;t--){var a=n[t].getChildren();if(a.length){return a[a.length-1]}}}}};i.getNextOverlay=function(e){if(!e){return undefined}var r=this.getFirstChildOverlay(e);if(r){return r}var n=this.getNextSiblingOverlay(e);if(n){return n}do{e=e.getParentElementOverlay();n=this.getNextSiblingOverlay(e)}while(e&&!n);return n};i.getPreviousOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(!r){return undefined}var n=this.getPreviousSiblingOverlay(e);if(n){var t=n;do{n=t;t=this.getLastChildOverlay(n)}while(t);return n}return e.getParentElementOverlay()};i.iterateOverlayElementTree=function(e,r){r(e);e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){this.iterateOverlayElementTree(e,r)},this)},this)};i.getClosestOverlayForNode=function(e){var r=n.getClosestElementForNode(e);return i.getClosestOverlayFor(r)};i.setFirstParentMovable=function(e,r){if(!r){const r=this.getFirstMovableParentOverlay(e);if(r){e._firstMovableParentOverlay=r;r.setMovable(false)}}else if(e._firstMovableParentOverlay){e._firstMovableParentOverlay.setMovable(true);delete e._firstMovableParentOverlay}};i.findAllSiblingOverlaysInContainer=function(e,r){var n=e.getParentElementOverlay();var t=[];if(n){if(n!==r){var a=i.findAllSiblingOverlaysInContainer(n,r);t=a.map(function(r){var n=r.getAggregationOverlay(e.getParentAggregationOverlay().getAggregationName());return n?n.getChildren():[]}).reduce(function(e,r){return e.concat(r)},[])}else{var g=e.getParentAggregationOverlay().getAggregationName();var l=n.getAggregationOverlay(g);t=l&&l.getChildren()||[]}}t=t.filter(function(e){return e.getDesignTimeMetadata()});return t};i.findAllOverlaysInContainer=function(e,r){var n=e.getRelevantContainer()||e.getElement();var a=t.getOverlay(n);var g=[];if(!a){return g}var l=i._findAllSiblingsAndParents(e,a,0,r);if(l[0]){for(var o in l){g=g.concat(l[o])}var f=[];var v=r?g:l[0];v.forEach(function(e){f=f.concat(i._findAllChildrenInContainer(e,n))});g=g.concat(f)}else{g=i._findAllChildrenInContainer(e,n)}g.push(a);g=g.filter(function(e){return e.getDesignTimeMetadata()});return g};i._findAllSiblingsAndParents=function(e,r,n,t){var a=e.getParentElementOverlay();if(!a){return[]}function g(e){var r=e.getAggregationNames();var n=[];r.forEach(function(r){var t=e.getAggregationOverlay(r);var i=t?t.getChildren():[];n=i.concat(n)});return n}if(a!==r){var l;var o;l=i._findAllSiblingsAndParents(a,r,n+1,t);if(t){var f=[];l[n+1].forEach(function(e){f.concat(g(e))});l[n]=f;return l}o=l[n+1].map(function(r){var n=e.getParentAggregationOverlay().getAggregationName();var t=r.getAggregationOverlay(n);return t?t.getChildren():[]}).reduce(function(e,r){return e.concat(r)},[]);l[n]=o;return l}var v=[];if(t){v=g(a)}else{var u=e.getParentAggregationOverlay().getAggregationName();v=e.getParentElementOverlay().getAggregationOverlay(u).getChildren()}var d={};d[n]=v;return d};i._findAllChildrenInContainer=function(e,r,n){n||=[];if(e.getChildren().length>0){e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){if(e.getRelevantContainer()===r){n.push(e);i._findAllChildrenInContainer(e,r,n)}})})}return n};i.findAllUniqueAggregationOverlaysInContainer=function(e,r){var n=i.findAllSiblingOverlaysInContainer(e,r);return n.map(function(e){return e.getParentAggregationOverlay()}).filter(function(e,r,n){return n.indexOf(e)===r})};i.getIndexInAggregation=function(e,r,i){var a=n.getAggregation(r,i).filter(function(r){return!!t.getOverlay(r)||r===e});return a.indexOf(e)};function a(r,n){var t;var i;var g=r.getParent();var l=false;if(r.isA("sap.ui.dt.ElementOverlay")){var o=r.getParentElementOverlay();if(g){t=g.getAggregationName();i=g.getChildren().indexOf(r);l=o&&o.getAggregationOverlay(t,"AggregationBindingTemplateOverlays")}else{i=-1}n.push({overlayId:r.getId(),aggregation:t,index:i});if(l){return{overlayId:o.getId(),aggregation:t,stack:n}}}if(!g||g instanceof e){return{overlayId:undefined,aggregation:undefined,stack:n}}return a(g,n)}i.getClosestBoundControl=function(e){return a(e,[])};i.findParentOverlaysWithScrollbar=function(e){var r=[];function n(e){if(e._oScrollbarSynchronizers.size>0){r.push(e)}if(!e.getParent()){return r}return n(e.getParent())}return n(e)};i.getFirstMovableParentOverlay=function(e){function r(e){if(e.isMovable()){return e}if(!e.getParentElementOverlay()){return undefined}return r(e.getParentElementOverlay())}const n=e.getParentElementOverlay();if(n){return r(n)}return undefined};return i},true);
//# sourceMappingURL=OverlayUtil.js.map