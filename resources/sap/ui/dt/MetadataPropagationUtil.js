/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/dt/Util","sap/base/util/merge","sap/base/util/isEmptyObject"],function(t,n,e){"use strict";var a={};a._getParentPropagationInfo=function(t){if(!t||!t.propagationInfos){return false}return Object.assign([],t.propagationInfos)};a._getCurrentRelevantContainerPropagation=function(n,e){const a={};const r=typeof n.propagateRelevantContainer;if(!n.propagateRelevantContainer){return a}else if(r==="function"){a.relevantContainerFunction=n.propagateRelevantContainer;a.relevantContainerElement=e}else if(r==="boolean"){a.relevantContainerFunction=function(){return true};a.relevantContainerElement=e}else{const n=t.wrapError(`Wrong type: it should be either a function or a boolean value and it is:${r}`);const e="sap.ui.dt.MetadataPropagationUtil#_getCurrentRelevantContainerPropagation";n.name=`Error in ${e}`;n.message=`${e} / ${n.message}`;throw n}return a};a._getCurrentDesigntimePropagation=function(n,e){const a={};const r=typeof n.propagateMetadata;if(!n.propagateMetadata){return a}else if(r==="function"){a.relevantContainerElement=e;a.metadataFunction=n.propagateMetadata}else{const n=t.wrapError(`Wrong type: it should be a function and it is:${r}`);const e="sap.ui.dt.MetadataPropagationUtil#_getCurrentDesigntimePropagation";n.name=`Error in ${e}`;n.message=`${e} / ${n.message}`;throw n}return a};a._setPropagationInfo=function(t,n,a){if(!a&&e(n)){return false}t.propagationInfos=a||[];if(!e(n)){t.propagationInfos.push(n)}return t};a.propagateMetadataToAggregationOverlay=function(t,n,r){var o;var i;var g;var s=Object.assign({},t);var u=a._getParentPropagationInfo(r);if(s&&!e(s)){g=a._getCurrentRelevantContainerPropagation(s,n);i=a._getCurrentDesigntimePropagation(s,n)}if(u||!e(g)||!e(i)){o=Object.assign({},g,i);return a._setPropagationInfo(s,o,u)}return s};a.getRelevantContainerForPropagation=function(t,n){var e=false;if(!t||!t.propagationInfos){return false}t.propagationInfos.some(function(t){if(t.relevantContainerFunction&&t.relevantContainerFunction(n)){e=t.relevantContainerElement;return true}});return e||false};a.getMetadataForPropagation=function(t,a){var r={};if(!t||!t.propagationInfos){return false}var o=t.propagationInfos.slice().reverse();r=o.reduce(function(t,e){if(e.metadataFunction){var r=e.metadataFunction(a,e.relevantContainerElement);return n(t,r)}return t},r);return e(r)?false:r};a.propagateMetadataToElementOverlay=function(t,e,r){var o=a.getRelevantContainerForPropagation(e,r);var i=a.getMetadataForPropagation(e,r);if(!o&&!i){return t}var g=n({},t);if(o){g.relevantContainer=o}if(i){if(i.actions===null||i.actions==="not-adaptable"){var s=r.getMetadata().getAllAggregations();var u=Object.keys(s);if(g.aggregations){u=u.concat(Object.keys(g.aggregations).filter(function(t){return u.indexOf(t)<0}))}else{g.aggregations={}}u.forEach(function(t){if(g.aggregations[t]&&g.aggregations[t].actions){g.aggregations[t].actions=i.actions}})}return n(g,i)}return g};return a},true);
//# sourceMappingURL=MetadataPropagationUtil.js.map